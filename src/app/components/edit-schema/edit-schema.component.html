<div class="edit-schema-container">
    <div class="edit-schema">
        <div class="edit-schema-header-container">
            <div class="edit-schema-header">
                <p>Schema</p>
            </div>
            <div class="edit-schema-slim-button inline" (click)="delete()">
                <p>Delete</p>
            </div>
        </div>
        <div class="edit-schema-label">
            <p>Name</p>
        </div>
        <div class="edit-schema-input-container">
            <div class="edit-schema-input" *ngIf="schema">
                <input type="text" placeholder="Enter schema name" [(ngModel)]="schema.name">
            </div>
        </div>
        <div class="edit-schema-label row between">
            <p>Schema</p>
        </div>
        <div class="edit-schema-editor-container" *ngIf="schema">
            <div class="edit-schema-editor-row-left-container">
                <div class="edit-schema-editor-row-left" *ngFor="let row of schema.rows; index as index">
                    <p>{{ index + 1 }}</p>
                </div>
            </div>
            <div class="edit-schema-editor-row-right-container">
                <div class="edit-schema-editor-row-right" *ngFor="let row of schema.rows; index as index">
                    <input #rowKeyInputs type="text" placeholder="key" [(ngModel)]="row.key" (input)="adjustKeyWidth(index)">
                    <input #rowTypeInputs type="text" placeholder="type" [(ngModel)]="row.type" (input)="adjustTypeWidth(index)">
                </div>
            </div>
            <div class="edit-schema-editor-row-postfix-container">
                <div class="edit-schema-editor-row-postfix" *ngFor="let row of schema.rows" (click)="removeRow(row._id)">
                    <img src="/x.png">
                </div>
            </div>
        </div>
        <div class="edit-schema-slim-button-container">
            <div class="edit-schema-slim-button" (click)="addRow()">
                <p>Add another row</p>
            </div>
        </div>
        <div class="edit-schema-buttons">
            <div class="edit-schema-cancel" (click)="cancel()">
                <p>Cancel</p>
            </div>
            <div class="edit-schema-save" (click)="save()">
                <p>Save</p>
            </div>
        </div>
        <div class="edit-schema-divider">
            <div class="divider"></div>
        </div>
        <div class="edit-schema-path-docs">
            <div class="edit-schema-path-doc">
                <p>Schemas are based on Zod 3.x. See the Zod documentation for details.</p>
            </div>
        </div>
        <div class="edit-schema-hidden" *ngIf="schema">
            <div class="edit-schema-hidden-rows"  *ngFor="let row of schema.rows;">
                <span #rowKeySpans>{{ row.key }}</span>
                <span #rowTypeSpans>{{ row.type }}</span>
            </div>
        </div>
    </div>
</div>
